# プロジェクトコンテキスト概要 (更新日: 2026-02-19)

## 📌 概要
**Multi-Agent IDE** は、複数のAIエージェント（Architect, Coder, Testerなど）が協力して、ユーザーの要望に基づいてソフトウェアを構築する、AIを活用した統合開発環境です。

## ✅ 完了したタスク
- **基本インフラ**:
    - バックエンド: FastAPI, CrewAI, API/WebSocket設定
    - フロントエンド: React + Vite, Monaco Editor統合
    - LLM統合: OpenAI, Google Gemini, **ZhiPu AI (GLM-4)**
- **エージェント統合**:
    - Architect, Coder, Tester, Librarian エージェントの実装
    - ワークスペース操作用の `FileReadTool` & `FileWriteTool` (セキュリティ強化済み: パストラバーサル防止、誤ったディレクトリ作成防止)
- **IDE機能**:
    - **インタラクティブターミナル**: xterm.js と WebSocket を使用した本格的な対話型シェル環境の実装 (PowerShell連携)
    - **リアルタイム・ファイルエクスプローラー**: 自動更新
    - **アクティビティログ**: エージェントの思考と行動を表示 (重複表示の不具合修正済み)
    - **ファイル削除**: UIから操作可能
    - **コード実行**: ターミナル経由での対話的実行が可能

## 🚧 現在の進捗とステータス
- **Phase 1 (MVP)**: 完了
- **Phase 2 (ファイルI/O)**: 完了
- **Phase 3 (高度な機能)**: **インタラクティブターミナル実装完了**
    - 現在は安定性の向上とUI/UXの改善フェーズ
- **システム状態**:
    - バックエンド: 正常稼働中 (WebSocketエンドポイント `/api/ws/terminal` 追加)
    - エージェント: GLM-4 をメインモデルとして採用し、安定してコード生成が可能 (Gemini APIのレート制限問題を回避)
    - フロントエンド: ターミナルとエディタの統合レイアウト完了

## 📝 残りのタスク (ロードマップ)
1. **プロジェクト管理**:
    - 複数のプロジェクトを作成・切り替える機能（現在は単一ワークスペースのみ）。
2. **サンドボックスセキュリティ**:
    - 現在の直接実行 (`subprocess`) から、Dockerコンテナなどの隔離環境への移行。
3. **Git連携**:
    - IDEから直接GitHubへコミット・プッシュする機能 (現在はCLI経由)。
4. **LSP (Language Server Protocol)**:
    - Monaco Editorでのより高度なコード補完とエラーチェック。

## ⚠️ 既知の問題と課題
1. **ブラウザのリロード**:
    - バックエンド再起動時、WebSocket接続が切断されるため、フロントエンドのリロードが必要になる場合がある (自動再接続ロジックの強化が必要)。
2. **エージェントの出力パース**:
    - 稀にエージェントがMarkdown形式を崩すことがあり、ファイル抽出ロジック (`main.py`) での改善の余地あり。

## 💡 次のステップへの提案
- **Dockerサンドボックス化**: セキュリティと環境再現性のために最優先で検討。
- **UI改善**: ファイルエクスプローラーのドラッグ＆ドロップ対応や、タブ機能の追加。
- **エージェントのメモリ機能**: 会話履歴を保持し、文脈をより長く理解できるようにする (現在は `memory=False`)。

---
*新しいセッションを開始する際は、このファイルを読んでプロジェクトの現状を把握してください。*
