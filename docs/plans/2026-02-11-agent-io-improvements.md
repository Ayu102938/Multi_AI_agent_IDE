# Agent I/O & Workflow Improvements Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Transition from "Chat-to-Text" workflow to "Chat-to-File" workflow. Agents will be able to write code directly to files, supporting multi-file projects and persistence.

**Architecture:**
- **Backend:** Add `FileReadTool` and `FileWriteTool` to CrewAI agents. Configure a safe "workspace" directory for agent output.
- **API:** Add endpoints to list/read files from the workspace.
- **Frontend:** Add a file explorer (simple list) to select and view files generated by agents.

**Tech Stack:** CrewAI Tools, FastAPI, React.

---

### Task 1: Configure Agent Workspace & Tools

**Files:**
- Modify: `backend/agents.py`
- Modify: `backend/main.py`
- Create: `backend/workspace/` (Directory)

**Step 1: Create workspace directory**
Ensure `backend/workspace` exists on startup.

**Step 2: Add File Tools to Agents**
Update `create_agents` in `backend/agents.py` to include `FileReadTool` and `FileWriteTool`.
*Note: Restrict root_directory to `backend/workspace` for safety.*

**Step 3: Update Agent Instructions**
Update Agent `goal` or `backstory` to explicitly instruct them to "Write code to files in the workspace directory".

### Task 2: Workspace API Endpoints

**Files:**
- Modify: `backend/main.py`

**Step 1: Implement `GET /api/files`**
List all files in `backend/workspace`.

**Step 2: Implement `GET /api/files/{filename}`**
Read content of a specific file.

### Task 3: Frontend File List

**Files:**
- Modify: `frontend/src/App.jsx`

**Step 1: Add File List Sidebar**
Fetch list from `/api/files` and display buttons/links.

**Step 2: Load File Content on Click**
When a file is clicked, fetch content and set it to the Monaco Editor.

### Task 4: Refactor Run Functionality

**Files:**
- Modify: `backend/main.py`

**Step 1: Update Run Endpoint**
Update execution logic to work within the `backend/workspace` context, allowing imports between generated files.

**Step 2: Verify Execution**
Test running a multi-file script (e.g., `main.py` importing `module.py`) created by agents.
