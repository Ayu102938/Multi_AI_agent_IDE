# Frontend File Explorer Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Implement a file explorer in the frontend to allow users to browse and open files generated by agents in the workspace.

**Architecture:** 
- Create a `FileExplorer` component that fetches file list from the backend API (`/api/files`).
- Update `App.jsx` to include the `FileExplorer` and handle file selection by fetching content (`/api/files/{filename}`) and updating the Monaco Editor.
- Maintain existing styling and ensure a seamless integration.

**Tech Stack:** React, Axios, CSS.

---

### Task 1: Create FileExplorer Component

**Files:**
- Create: `frontend/src/components/FileExplorer.jsx`
- Create: `frontend/src/components/FileExplorer.css`

**Step 1: Create Component Structure**

Create `frontend/src/components` directory first if it doesn't exist.

Write `frontend/src/components/FileExplorer.jsx`:
```jsx
// frontend/src/components/FileExplorer.jsx
import { useState, useEffect } from 'react';
import axios from 'axios';
import './FileExplorer.css';

function FileExplorer({ onFileSelect }) {
  const [files, setFiles] = useState([]);
  const [error, setError] = useState(null);

  useEffect(() => {
    fetchFiles();
  }, []);

  const fetchFiles = async () => {
    try {
      const response = await axios.get('http://localhost:8000/api/files');
      setFiles(response.data.files);
    } catch (err) {
      console.error("Error fetching files:", err);
      setError("Failed to load files");
    }
  };

  return (
    <div className="file-explorer">
      <h3>Workspace Files</h3>
      {error && <div className="error">{error}</div>}
      <button onClick={fetchFiles} className="refresh-btn">Refresh</button>
      <ul className="file-list">
        {files.map((file) => (
          <li key={file} onClick={() => onFileSelect(file)}>
            {file}
          </li>
        ))}
      </ul>
    </div>
  );
}

export default FileExplorer;
```

**Step 2: Add Styling**

Write `frontend/src/components/FileExplorer.css`:
```css
/* frontend/src/components/FileExplorer.css */
.file-explorer {
  width: 250px;
  background-color: #f0f0f0;
  border-right: 1px solid #ccc;
  padding: 10px;
  height: 100vh;
  box-sizing: border-box;
  overflow-y: auto;
}

.file-explorer h3 {
  margin-top: 0;
  font-size: 1.1em;
  color: #333;
}

.file-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.file-list li {
  padding: 8px;
  cursor: pointer;
  border-bottom: 1px solid #eee;
  font-family: monospace;
}

.file-list li:hover {
  background-color: #ddd;
}

.refresh-btn {
  margin-bottom: 10px;
  padding: 5px 10px;
  cursor: pointer;
}

.error {
  color: red;
  font-size: 0.9em;
}
```

### Task 2: Integrate FileExplorer into App

**Files:**
- Modify: `frontend/src/App.jsx`
- Modify: `frontend/src/App.css`

**Step 1: Update App Structure**

Modify `frontend/src/App.jsx` to import `FileExplorer` and adjust layout.

```jsx
// frontend/src/App.jsx
import { useState } from 'react';
// ... existing imports ...
import FileExplorer from './components/FileExplorer';
import './App.css'; 

function App() {
  const [code, setCode] = useState("// Type your code here or ask the agent to generate it.");

  // ... existing code ...

  const handleFileSelect = async (filename) => {
    try {
      const response = await axios.get(`http://localhost:8000/api/files/${filename}`);
      if (response.data.content) {
        setCode(response.data.content);
      }
    } catch (error) {
      console.error("Error reading file:", error);
      alert("Failed to read file content");
    }
  };

  return (
    <div className="app-container">
      <FileExplorer onFileSelect={handleFileSelect} />
      <div className="main-content">
        {/* ... existing main content ... */}
        {/* Pass code and setCode to Monaco Editor if not already handled by existing context */}
      </div>
    </div>
  );
}
```

**Step 2: Update App Styling**

Modify `frontend/src/App.css` to support the sidebar layout.

```css
/* frontend/src/App.css */
.app-container {
  display: flex;
  width: 100vw;
  height: 100vh;
  oveflow: hidden;
}

.main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow: hidden;
}

/* Adjust existing styles if necessary to fit into main-content */
```

### Task 3: Verification

**Manual Verification**

1.  **Start Backend**:
    - Open terminal in `backend/`
    - Run: `uv run uvicorn main:app --reload`
2.  **Start Frontend**:
    - Open terminal in `frontend/`
    - Run: `npm run dev`
3.  **Check UI**:
    - Open browser at `http://localhost:5173`
    - Verify a sidebar labeled "Workspace Files" is visible on the left.
4.  **Test File Listing**:
    - Ensure backend `workspace/` has some files (create a dummy file if needed).
    - Verify the file appears in the list.
5.  **Test File Opening**:
    - Click on a file in the list.
    - Verify the content of the file loads into the central Monaco Editor.
